---
layout: default
title: All Uses of RNG in LTTP
background: glitchybg
---
<div class="contentstuff glitchexp">
	<h1>Random Number Generation</h1>
	<p>This is an exhaustive list of all 212 instances of the RNG routine being called.</p>
	<p>I've done my best to document exactly what each call is for, but there are probably a couple mistakes. There are also a couple places where I just gave up, because the code is difficult to follow without much pay off. If I have a reason to investigate those calls in the future, I'll update this page then.</p>

	<h2>Sprites</h2>
	<ul>
		<li>Sparkles
			<ul>
				<li>Used twice to generate coordinate offsets for non-descript, general sprite usage (4 possible values each, indexing a table). </li>
				<li>Used twice to generate coordinate offsets for frozen sprites (4 possible values each, indexing a table).</li>
			</ul>
		</li>
		<li>Boss death
			<ul>
				<li>Used twice to generate coordinate offsets for explosions (8 possible values each, indexing a table).</li>
			</ul>
		</li>
		<li>Guards
			<ul>
				<li>Movement timer (40&ndash;104 frames).</li>
				<li>Direction to face (4 possible values).</li>
				<li>When swords collide, called once to produce a value 0&ndash;7 to index a table for guard recoil timer. Called again to produce another value 0&ndash;7 to index a table for Link's recoil timer.</li>
			</ul>
		</li>
		<li>Weak guards
			<ul>
				<li>Starting direction for weak soldiers (4 possible values).</li>
				<li>Movement timer (48&ndash;112 frames).</li>
				<li>Direction to turn for next movement.</li>
			</ul>
		</li>
		<li>Spear guard
			<ul>
				<li>How long to wait before walking/stopping (80&ndash;208 frames).</li>
				<li>Direction to face (4 possible values).</li>
			</ul>
		</li>
		<li>Flopping fish
			<ul>
				<li>Spawn a fish when non-fish sprites land in water (1/2 chance).</li>
				<li>Pointless call that ticks the RNG but doesn't use the value, when a fish is spawned from tossing sprites.</li>
				<li>Speed on Z-axis (16&ndash;32).</li>
				<li>Speed along X- and Y-axis (8 possibilities, indexing a table).</li>
			</ul>
		</li>
		<li>Lanmolas
			<ul>
				<li>Randomizes the animation graphic of debris (2 possible values).</li>
				<li>Choose starting Y-coordinate (8 possible values to index a table)</li>
				<li>Choose starting X-coordinate (8 possible values to index a table)</li>
				<li>Choose target Y-coordinate (8 possible values to index a table)</li>
				<li>Choose target X-coordinate (8 possible values to index a table)</li>
			</ul>
		</li>
		<li>Vitreous
			<ul>
				<li>Random value for small eyeballs' animation timers on spawn.</li>
				<li>Choose next eyeball to activate (16 possible values to index a table).</li>
				<li>Starting seed for lightning (8 possible values).</li>
			</ul>
		</li>
		<li>Arrghus
			<ul>
				<li>Number of frames to wobble in phase 1 (48&ndash;112 frames).</li>
				<li>Initial value of animation timer of puffs.</li>
			</ul>
		</li>
		<li>Agahnim
			<ul>
				<li>Random timer for debrish on crashing to Ganon (48&ndash;80 frames).</li>
				<li>Choose next warp (16 possible values, indexing a table).</li>
				<li>Spawn blue ball (1/2 chance).</li>
			</ul>
		</li>
		<li>Apples
			<ul>
				<li>Number of apples to spawn (2&ndash;5)</li>
				<li>Called twice to determine a landing spot.</li>
			</ul>
		</li>
		<li>Archery game guy
			<ul>
				<li>Animation timer on spawn.</li>
			</ul>
		</li>
		<li>Bari
			<ul>
				<li>Change direction of movement (1/4 chance).</li>
				<li>Begin electrocution (1/2 chance).</li>
				<li>Timer before electrocution rolls (128&ndash;192 frames)</li>
			</ul>
		</li>
		<li>Bees (wtf all this nonsense)
			<ul>
				<li>Called twice to produce a speed on each axis when spawning bees from a bonk (8 possible values each, indexing a table).</li>
				<li>Called twice to produce a speed on each axis when spawning bees from a bottle (8 possible values each, indexing a table).</li>
				<li>Called twice to produce a speed on each axis when spawning the good bee from his statue (8 possible values each, indexing a table).</li>
				<li>Called twice to help normal bees find a target (4 possible values each, indexing a table).</li>
				<li>Called twice to help good bees find a target (4 possible values each, indexing a table).</li>
				<li>Called twice to help player bees find a target (4 possible values each, indexing a table).</li>
			</ul>
		</li>
		<li>Popo
			<ul>
				<li>Movement timer (128&ndash;192 frames).</li>
				<li>Random speed (16 possible values, indexing a table).</li>
			</ul>
		</li>
		<li>Bottle vendor
			<ul>
				<li>Controls animation reset (1/256 chance)</li>
			</ul>
		</li>
		<li>Boulders
			<ul>
				<li>Location along X-axis to spawn (64&ndash;192 pixels from left side of screen).</li>
				<li>Bounce left or right (1/2 chance).</li>
			</ul>
		</li>
		<li>Pink ball guy
			<ul>
				<li>Low byte of X-coordinate target.</li>
				<li>Low byte of Y-coordinate target.</li>
				<li>Recoil speed on Z-axis when kicked by bully (0-15).</li>
			</ul>
		</li>
		<li>Buzzblob
			<ul>
				<li>Selects new direction of movement (8 possible values, indexing a table).</li>
			</ul>
		</li>
		<li>Chain chomp
			<ul>
				<li>Idle bobbing timer (16&ndash;48 frames).</li>
				<li>Movements while bobbing around (16 possible values, indexing a table).</li>
				<li>Direction for lunging (16 possible values, indexing a table). Except, it's overridden; see next item.</li>
				<li>Decide whether to lunge at Link or at a random target (0 chance of success). This never happens, so they only ever lunge at Link.</li>
			</ul>
		</li>
		<li>Cucco
			<ul>
				<li>Direction to move in (16 possible values, indexing a table).</li>
				<li>Movement timer (16&ndash;48 frames).</li>
				<li>Sturm!: Single call reused to choose which part of the screen the cucco enters from (1/2 chance per axis), its starting position on the other axis, and which edge it enters through on the axis chosen earlier.</li>
			</ul>
		</li>
		<li>Crab
			<ul>
				<li>Movement timer (32&ndash;96 frames). The timer is then masked to choose a number 0&ndash;3 to index a table for movement speed.</li>
			</ul>
		</li>
		<li>Crystal switch
			<ul>
				<li>Offset from switch on Y-axis (0&ndash;7 pixels). The X-axis offset is not random; it is a frame rule.</li>
			</ul>
		</li>

		<li>Deadrock
			<ul>
				<li>Movement timer (32&ndash;64 frames).</li>
				<li>Direction of movement (4 possibilities).</li>
			</ul>
		</li>
		<li>Digging game guy
			<ul>
				<li>Prize to give (8 possibilities). 3 of these roll nothing as a prize.</li>
				<li>Second roll to obtain heart piece (1/4 chance). Failure results in nothing.</li>
			</ul>
		</li>
		<li>Drunkard in pub
			<ul>
				<li>Reset animation timer (1/256 chance).</li>
			</ul>
		</li>
		<li>Eyegore
			<ul>
				<li>Movement timer (4 possibilities, indexing a table).</li>
			</ul>
		</li>
		<li>Fairies
			<ul>
				<li>Target X-coordinate.</li>
				<li>Target Y-coordinate.</li>
				<li>Altitude control (1/2 chance to move up or down).</li>
				<li>Starting target speed (2 possible values). I think? Fairies are confusing kinda.</li>
			</ul>
		</li>
		<li>Big fairies
			<ul>
				<li>Used twice to generate coordinate offsets for sparkles (4 possible values each, indexing a table).</li>
				<li>Used twice to generate coordinate offsets for sparkles (4 possible values each, indexing a table). Except this entry is for the fairy queens</li>
				<li>Granting luck level (4 possibilities, indexing a table). 25% good luck; 25% bad luck; 50% chance no luck.</li>
			</ul>
		</li>
		<li>Fortune teller
			<ul>
				<li>Choose new fortune in Light World (4 possibilites).</li>
				<li>Choose new fortune in Dark World (4 possibilites).</li>
			</ul>
		</li>
		<li>Freezor
			<ul>
				<li>Offset on X- and Y-axes of sparkles (8 possibilities, indexing a table).</li>
			</ul>
		</li>
		<li>Ganon
			<ul>
				<li>Warp (1/2 chance; 99/100 chance when on good pace).</li>
				<li>Warp location (4 possibilities, combined with current position, indexing a table).</li>
			</ul>
		</li>
		<li>Moldorm
			<ul>
				<li>Direction to turn in (1/2 for each).</li>
				<li>Movement timer (32&ndash;64 frames).</li>
				<li>Spinning timer (8&ndash;24 frames).</li>
			</ul>
		</li>
		<li>Gibdo
			<ul>
				<li>Movement timer (48&ndash;80 frames).</li>
			</ul>
		</li>
		<li>Gibo
			<ul>
				<li>Speed along X- and Y-axes (8 possibilities, indexing a table).</li>
				<li>Movement timer (32&ndash;64 frames).</li>
			</ul>
		</li>
		<li>Catfish
			<ul>
				<li>Spawn fireball or bomb if quake is owned (1/2 chance).</li>
			</ul>
		</li>
		<li>Helmasaur
			<ul>
				<li>Movement along X- and Y-axes (8 possibilities, indexing a table).</li>
				<li>First fireball to split.</li>
				<li>Spit fireball (1/2 chance).</li>
			</ul>
		</li>
		<li>Hinox
			<ul>
				<li>Change direction or not (1/4 chance).</li>
				<li>New direction (8 possibilites but it's also convoluted and based on current direction).</li>
				<li>Movement timer (96&ndash;160 frames).</li>
			</ul>
		</li>
		<li>Hover
			<ul>
				<li>Movement timer (12&ndash;28 frames).</li>
			</ul>
		</li>
		<li>Keese
			<ul>
				<li>Increment a step counter for movement (1/2 chance). This causes keese to go randomly to the next or previous step of movement (16 possible movements).</li>
			</ul>
		</li>
		<li>Kholdstare
			<ul>
				<li>Movement timer for moving faster (32&ndash;96 frames).</li>
				<li>Movement timer for moving slower (96&ndash;160 frames).</li>
				<li>Direction along X- and Y- axes (4 possible values, indexing a table). Value reused to decide if Link should be targetted (1/8 chance).</li>
				<li>Offset on Y-axis of poofy colors (8 possible values, indexing a table).</li>
				<li>Offset on X-axis of poofy colors (8 possible values, indexing a table).</li>
				<li>Direction to split ice balls (1/2 chance cardinal or diagonal).</li>
			</ul>
		</li>
		<li>Kiki
			<ul>
				<li>Velocity on Z-axis when running away (16&ndash;31).</li>
				<li>Velocity on Z-axis when jumping on POD (16&ndash;32). Yes, these are different ranges.</li>
			</ul>
		</li>
		<li>Kodongo
			<ul>
				<li>New direction (4 possiblities). If the direction collides with a wall, they will choose the next direction. If all 4 directions are blocked, this will hardlock the game in an infinite loop.</li>
				<li>Breathe fire (1/4 chance), but only on certain coordinates.</li>
			</ul>
		</li>
		<li>Kyameron
			<ul>
				<li>Respawn timer (96&ndash;160 frames).</li>
				<li>X-coordinate offset of sparkle (&minus;4&ndash;11 pixels).</li>
				<li>Y-coordinate offset of sparkle (&minus;4&ndash;11 pixels).</li>
			</ul>
		</li>
		<li>Leever
			<ul>
				<li>Movement timer (160&ndash;224 frames).</li>
				<li>Movement timer (64&ndash;96 frames).</li>
			</ul>
		</li>
		<li>Lightning
			<ul>
				<li>Path seeding (8 possible values).</li>
			</ul>
		</li>
		<li>Lynel
			<ul>
				<li>Fireball delay timer (16&ndash;32 frames).</li>
			</ul>
		</li>
		<li>Tablet
			<ul>
				<li>X-coordinate of debris.</li>
				<li>Y-coordinate of debris.</li>
			</ul>
		</li>
		<li>Moblin
			<ul>
				<li>Movement timer (4 possible values, indexing a table).</li>
				<li>Direction to walk (continue same way or next option). This one is kinda weird.</li>
			</ul>
		</li>
		<li>Mini moldorm
			<ul>
				<li>Change direction of rotation (1/2 chance).</li>
				<li>Direction to turn when starting a new movement (1/2 chance each).</li>
				<li>Movement timer (32&ndash;64 frames).</li>
				<li>Another movement timer (8&ndash;24 frames).</li>
			</ul>
		</li>
		<li>Mothula
			<ul>
				<li>Speed along X- and Y-axes (8 possible values, indexing a table).</li>
				<li>Movement timer (64&ndash;96 frames).</li>
				<li>Beam delay (64&ndash;96 frames).</li>
				<li>Spike block to bring to life. The first 2 block indices are twice as common as the rest.</li>
				<li>Direction of floor (4 possible values).</li>
				<li>Time until floor changes directions (128&dash;256 frames).</li>
			</ul>
		</li>
		<li>Octorok
			<ul>
				<li>Movement timer (48&ndash;112 frames). Timer reused to choose direction.</li>
				<li>Movement timer initial value (0&ndash;127 frames).</li>
			</ul>
		</li>
		<li>Pengator
			<ul>
				<li>Offset on X-axis of sparkles (4 possible values, indexing a table, with intricacies for separate movement directions).</li>
				<li>Offset on Y-axis of sparkles (4 possible values, indexing a table, with intricacies for separate movement directions).</li>
			</ul>
		</li>
		<li>Pikit
			<ul>
				<li>Speed along X- and Y-axes (4 possible values, indexing a table).</li>
				<li>Speed along Z-axis (19&ndash;27).</li>
				<li>Item to attempt theft of (4 possibilities).</li>
			</ul>
		</li>
		<li>Pirogusu
			<ul>
				<li>Direction change (is an ugly table indexing)</li>
				<li>Splash X-axis offset (4 possible values, indexing a table).</li>
				<li>Splash Y-axis offset (4 possible values, indexing a table).</li>
				<li>Time until next spawn (96&ndash;127 frames).</li>
			</ul>
		</li>
		<li>Poe
			<ul>
				<li>Modify Y-direction based on Link's relative location (1/4 chance).</li>
				<li>Actually modify Y-direction (2 possible values).</li>
				<li>Movement timer (16&ndash;24 frames).</li>
			</ul>
		</li>
		<li>Pokey
			<ul>
				<li>Starting direction (4 possibilities, indexing a table).</li>
			</ul>
		</li>
		<li>Bird
			<ul>
				<li>Speed on Z-axis when spawned (&minus;16&ndash;15).</li>
			</ul>
		</li>
		<li>Rat
			<ul>
				<li>New direction (4 possibilities). Value reused for movement timer (64&ndash;192 frames).</li>
			</ul>
		</li>
		<li>Ropa
			<ul>
				<li>Speed on Z-axis (20&ndash;36).</li>
			</ul>
		</li>
		<li>Snake
			<ul>
				<li>Direction to move. Value reused for movement timer (64&ndash;192 frames).</li>
			</ul>
		</li>
		<li>Hoarder
			<ul>
				<li>Speed along X- and Y-axes (4 possible values, indexing a table).</li>
			</ul>
		</li>
		<li>Trinexx
			<ul>
				<li>5 distinct calls in the sidenexx file for god knows what. I'll figure it out later.</li>
				<li>Offset on X-axis of explosion (8 possible values, indexing a table).</li>
				<li>Offset on Y-axis of explosion (8 possible values, indexing a table).</li>
				<li>2 more calls for something not worth my time to figure out right now.</li>
			</ul>
		</li>
		<li>Sluggula
			<ul>
				<li>Movement timer (32&ndash;64 frames). Value reused to set direction (4 possible values).</li>
				<li>Poop bombs (1/2 chance).</li>
			</ul>
		</li>
		<li>Snapdragon
			<ul>
				<li>Movement timer (4 possible values, indexing a table). Pointless masks higher bits then shifts right. Why?</li>
				<li>Direction to move (4 possible values).</li>
			</ul>
		</li>
		<li>Stalfos and Zazaks
			<ul>
				<li>Movement timer (4 possible values, indexing a table).</li>
				<li>Next direction to move.</li>
			</ul>
		</li>
		<li>Stalfos Knight
			<ul>
				<li>When to jump calculation. I don't get it 100% yet.</li>
				<li>Routine jump for setting next movement stuff or something (1/2 chance).</li>
			</ul>
		</li>
		<li>Hint NPCs
			<ul>
				<li>Reset animation timer (1/256 chance).</li>
			</ul>
		</li>
		<li>Swamola
			<ul>
				<li>Direction to move when emerging (8 possible values, indexing a table).</li>
				<li>Direction to move when submerging (8 possible values, indexing a table).</li>
			</ul>
		</li>
		<li>Tektite
			<ul>
				<li>Movement timer (48&ndash;112 frames).</li>
				<li>Speed on Z-axis (24&ndash;32).</li>
				<li>Direction to move (4 possible values, indexing a table).</li>
				<li>Another movement timer (72&ndash;136 frames).</li>
			</ul>
		</li>
		<li>Terrorpin
			<ul>
				<li>Movement timer (32&ndash;64 frames).</li>
			</ul>
		</li>
		<li>Thief
			<ul>
				<li>Item to attempt to steal (4 possible values).</li>
			</ul>
		</li>
		<li>Firesnake
			<ul>
				<li>Next direction to move.</li>
			</ul>
		</li>
		<li>Witch
			<ul>
				<li>Stir speed of brew.</li>
			</ul>
		</li>
		<li>Bunny
			<ul>
				<li>Offset on X- and Y-axis from original spawn point (4 possible values, indexing a table).</li>
			</ul>
		</li>
		<li>Wizzrobe
			<ul>
				<li>Teleport timer (32&ndash;64 frames).</li>
			</ul>
		</li>
		<li>Blobs
			<ul>
				<li>Movement timer (96&ndash;159 frames).</li>
				<li>Movement timer again (64&ndash;96 frames).</li>
				<li>Movement timer stop point (16&ndash;31 frames).</li>
				<li>For endless spawns: initial movement timer (16&ndash;31 frames).
			</ul>
		</li>
		<li>Zora
			<ul>
				<li>Relative X-position from initial spawn to resurface (8 possible values, indexing a table).</li>
				<li>Relative Y-position from initial spawn to resurface (8 possible values, indexing a table).</li>
			</ul>
		</li>
		<li>King Zora
			<ul>
				<li>Speed on Z-axis of flippers (24&ndash;40). The exact implementation suggests a different routine was being used at some point in development, possibly very early on in this case.</li>
			</ul>
		</li>
		<li>Zoro
			<ul>
				<li>X-axis offset of spawn (8 possible values, indexing a table).</li>
				<li>Animation timer start point.</li>
			</ul>
		</li>
		<li>Cannonballs
			<ul>
				<li>Shooter activated for full room shooters (15 possible values, indexing a table).</li>
				<li>Position of next small ball (1/2 chance left or right).</li>
			</ul>
		</li>
		<li>Zirro
			<ul>
				<li>Movement timer before direction change (32&ndash;63 frames). Value reused immediately for speed on both axes (8 possible values, indexing a table).</li>
			</ul>
		</li>
		<li>Generates a number that is masked with a value corresponding to prize packs. Results in 1/2 for most prize packs, except the magic prize pack, which is 1/1.</li>
		<li>Completely unreachable code
			<ul>
				<li>Movement timer</li>
				<li>Another movement timer</li>
			</ul>
		</li>
	</ul>

	<h2>Other</h2>
	<ul>
		<li>Ancilla sparkles
			<ul>
				<li>Generate coordinate offsets for general use sparkles (each nibble used separately to create a value 0&ndash;15 on each axis with one output). This routine is called by various ancillae, such as the red boomerang, opening Ganon's Tower (in addition to its own RNG), and crystals. It is also used by Link when sword is charging and the crystal maiden sprites.</li>
				<li>Generate coordinate offsets for crystal sparkles when opening Ganon's Tower (each nibble used separately to create a value 0&ndash;15 on each axis with one output).</li>
				<li>Generate coordinate offsets for sword charge sparkles (each nibble used separately to create a value 0&ndash;15 on each axis with one output). Distinct from above routine.</li>
				<li>Generate coordinate offsets for silver arrow sparkles (each nibble used separately to create a value 0&ndash;15 on each axis with one output).</li>
			</ul>
		</li>
		<li>Chest game
			<ul>
				<li>Generate prize for low-stakes chest game (16 possible values).</li>
				<li>Generate prize for high-stakes chest game (16 possible values).</li>
				<li>Generate prize for heart-piece chest game (8 possible values).</li>
			</ul>
		</li>
		<li>Bush/Rock prizes
			<ul>
				<li>Actually try to spawn something when outdoors (1/2 chance).</li>
				<li>Choose prize for fairy/heart pack bushes (4 possible values).</li>
				<li>Success for specific overworld secrets; e.g. bomb bushes (1/2 chance).</li>
			</ul>
		</li>
		<li>Credits
			<ul>
				<li>Called twice for something? (8 possible values, indexing a table)??</li>
			</ul>
		</li>
	</ul>
</div>